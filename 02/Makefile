###############################################################################
# Compiler options
###############################################################################

FC = gfortran
FCFLAGS = -g -O2 -march=native -mtune=native
LDFLAGS =

###############################################################################
# Executable name
###############################################################################

EXE = 02.$(notdir $(FC)).x

###############################################################################
# Prefix rules
###############################################################################

# Prevent invocation of m2c (Modula-2 compiler)
%.o: %.mod

%.f90:

%.f90.o: %.f90
	$(FC) $(FCFLAGS) -c $< -o $*.o

###############################################################################
# Phony targets
.PHONY: all

all: main

# List targets
SRC = 02.f90
TGT = 02.f90.o 
OBJ = 02.o

# Build main
main: $(TGT)
	$(FC) $(OBJ) -o $(EXE) $(LDFLAGS)

# Clean up
clean:
	-rm -f $(OBJ)
	-rm -f $(EXE)
